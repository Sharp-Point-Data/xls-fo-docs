# Block and Line-related Properties

## Overview

<!-- Source: https://www.w3.org/TR/xslfo20/#hyphenation-keep -->

The block and line-related properties govern the construction of line-areas and the placement of these line-areas within containing block-areas. They control hyphenation behavior, line height and stacking, text alignment, whitespace handling, indentation, line wrapping, and widow/orphan control. These properties are fundamental to text composition and paragraph formatting in XSL-FO.

## Properties

### hyphenation-keep

| Field | Value |
|---|---|
| **Values** | `auto \| column \| page \| inherit` |
| **Initial** | `auto` |
| **Applies to** | fo:block, fo:character |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#hyphenation-keep -->

Controls whether hyphenation can be performed on the last line that fits in a given reference-area.

Values have the following meanings:

- **auto** -- No restriction applies. The word may be hyphenated at the end of any region.
- **column** -- Both parts of a hyphenated word shall lie within a single column.
- **page** -- Both parts of a hyphenated word shall lie within a single page.

### hyphenation-ladder-count

| Field | Value |
|---|---|
| **Values** | `no-limit \| <number> \| inherit` |
| **Initial** | `no-limit` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#hyphenation-ladder-count -->

Specifies a limit on the number of successive hyphenated line-areas the formatter may generate in a block-area.

Values have the following meanings:

- **no-limit** -- Any number of successive lines may be hyphenated.
- **\<number\>** -- An integer greater than or equal to 1. If a zero, negative, or non-integer value is provided, the value will be rounded to the nearest integer value greater than or equal to 1.

### last-line-end-indent

| Field | Value |
|---|---|
| **Values** | `<length> \| <percentage> \| inherit` |
| **Initial** | `0pt` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | refer to inline-progression-dimension of closest ancestor block-area that is not a line-area |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#last-line-end-indent -->

Specifies an indent to be applied to the last line-area child of the last block-area generated and returned by the formatting object, and to any line-area generated by the formatting object whose following sibling is a block-area that is not a line-area. It is added to the block's end-edge. Positive values indent the edge, negative values outdent the edge.

Values have the following meanings:

- **\<length\>** -- The "last-line-end-indent" is specified as a length.
- **\<percentage\>** -- The "last-line-end-indent" is specified as a percentage of the inline-progression-dimension of the closest ancestor block-area.

### line-height

| Field | Value |
|---|---|
| **Values** | `normal \| <length> \| <number> \| <percentage> \| <space> \| inherit` |
| **Initial** | `normal` |
| **Applies to** | fo:block, fo:character, fo:external-graphic, fo:inline, fo:inline-container, fo:instream-foreign-object, fo:leader, fo:page-number, fo:page-number-citation, fo:page-number-citation-last |
| **Inherited** | Yes |
| **Percentages** | refer to the font size of the element itself |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#line-height -->

In XSL the "line-height" property is used in determining the half-leading trait.

Values have the following meanings:

- **normal** -- Tells user agents to set the computed value to a "reasonable" value based on the font size of the element. The value has the same meaning as \<number\>. A computed value for "normal" between 1.0 to 1.2 is recommended.
- **\<length\>** -- The box height is set to this length. Negative values are illegal.
- **\<number\>** -- The computed value of the property is this number multiplied by the element's font size. Negative values are illegal. However, the number, not the computed value, is inherited.
- **\<percentage\>** -- The computed value of the property is this percentage multiplied by the element's computed font size. Negative values are illegal.
- **\<space\>** -- (XSL extension) Specifies the minimum, optimum, and maximum values, the conditionality, and precedence of the "line-height" that is used in determining the half-leading. Negative values for line-height.minimum, line-height.optimum, and line-height.maximum are invalid and will be interpreted as 0pt. The line-height.conditionality setting can be used to control the half-leading above the first line or after the last line that is placed in a reference-area. The line-height.precedence setting can be used to control the merging of the half-leading with other spaces.

If line-height is specified using \<length\>, \<percentage\>, or \<number\>, the formatter shall convert the single value to a space-specifier with the subfields interpreted as follows: line-height.minimum, line-height.optimum, and line-height.maximum are all set to the resultant computed value; line-height.precedence is set to "force"; and line-height.conditionality is set to "retain".

### line-height-shift-adjustment

| Field | Value |
|---|---|
| **Values** | `consider-shifts \| disregard-shifts \| inherit` |
| **Initial** | `consider-shifts` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#line-height-shift-adjustment -->

This property is used to control whether the line-height is adjusted for content that has a baseline-shift.

Values have the following meanings:

- **consider-shifts** -- In determining the line-height, include the adjusted top-edge and bottom-edge of any characters that have a baseline-shift.
- **disregard-shifts** -- In determining the line-height, include the unshifted top-edge and bottom-edge of any characters that have a baseline-shift.

Note: This property can be used to prevent superscript and subscript characters from disrupting the line-spacing.

### line-stacking-strategy

| Field | Value |
|---|---|
| **Values** | `line-height \| font-height \| max-height \| inherit` |
| **Initial** | `max-height` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#line-stacking-strategy -->

Selects the strategy for positioning adjacent lines, relative to each other.

Values have the following meanings:

- **line-height** -- Uses the per-inline-height-rectangle. This matches CSS's line-height and positioning strategy.
- **font-height** -- Uses the nominal-requested-line-rectangle.
- **max-height** -- Uses the maximal-line-rectangle.

Implementations must support at least the "max-height" and "font-height" values defined in this Recommendation, and may treat "line-height" as if "max-height" had been specified.

### linefeed-treatment

| Field | Value |
|---|---|
| **Values** | `ignore \| preserve \| treat-as-space \| treat-as-zero-width-space \| inherit` |
| **Initial** | `treat-as-space` |
| **Applies to** | fo:block, fo:inline |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#linefeed-treatment -->

The "linefeed-treatment" property specifies the treatment of linefeeds (character flow objects whose Unicode code point is U+000A) during the refinement process.

Values have the following meanings:

- **ignore** -- Specifies that any character flow object whose Unicode code point is U+000A shall be discarded during the refinement process.
- **preserve** -- Specifies no special action.
- **treat-as-space** -- Specifies that any character flow object whose Unicode code point is U+000A (linefeed) shall be converted during the refinement process into a character flow object whose Unicode code point is U+0020 (space).
- **treat-as-zero-width-space** -- Specifies that any character flow object whose Unicode code point is U+000A shall be converted during the refinement process into a character flow object whose Unicode code point is U+200B (zero width space). Note: The Unicode Standard recommends that the zero width space is considered a valid line-break point and that if two characters with a zero width space in between are placed on the same line they are placed with no space between them.

### text-align

| Field | Value |
|---|---|
| **Values** | `start \| center \| end \| justify \| inside \| outside \| left \| right \| <string> \| inherit` |
| **Initial** | `start` |
| **Applies to** | fo:block, fo:external-graphic, fo:instream-foreign-object, fo:table-and-caption |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#text-align -->

This property describes how inline content of a block is aligned.

Values have the following meanings:

- **start** -- Specifies that the content is to be aligned on the start-edge in the inline-progression-direction.
- **center** -- Specifies that the content is to be centered in the inline-progression-direction.
- **end** -- Specifies that the content is to be aligned on the end-edge in the inline-progression-direction.
- **justify** -- Specifies that the contents is to be expanded to fill the available width in the inline-progression-direction.
- **inside** -- If the page binding edge is on the start-edge, the alignment will be start. If the binding is the end-edge, the alignment will be end. If neither, use start alignment.
- **outside** -- If the page binding edge is on the start-edge, the alignment will be end. If the binding is the end-edge, the alignment will be start. If neither, use end alignment.
- **left** -- Interpreted as "text-align='start'".
- **right** -- Interpreted as "text-align='end'".
- **\<string\>** -- Specifies a string on which content of cells in a table column will align. This value applies only if the formatting object is a descendant of a table cell. If set on other formatting objects, it will be treated as "start".

For fo:external-graphic, fo:instream-foreign-object, and fo:table-and-caption it specifies the alignment of other areas as described in the constraint section for these formatting objects.

### text-align-last

| Field | Value |
|---|---|
| **Values** | `relative \| start \| center \| end \| justify \| inside \| outside \| left \| right \| inherit` |
| **Initial** | `relative` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#text-align-last -->

Specifies the alignment of the last line-area child of the last block-area generated and returned by the formatting object, and to any line-area generated by the formatting object whose following sibling is a block-area that is not a line-area, and any lines in the block ending in U+000A.

Values have the following meanings:

- **relative** -- If text-align is justify, then the alignment of the last line, and of any line ending in U+000A, will be start. If text-align is not justify, text-align-last will use the value of text-align.
- **start** -- Specifies that the content is to be aligned on the start-edge in the inline-progression-direction.
- **center** -- Specifies that the contents is to be centered in the inline-progression-direction.
- **end** -- Specifies that the content is to be aligned on the end-edge in the inline-progression-direction.
- **justify** -- Specifies that the contents is to be expanded to fill the available width in the inline-progression-direction.
- **inside** -- If the page binding edge is on the start-edge, the alignment will be start. If the binding is the end-edge, the alignment will be end. If neither, use start-side.
- **outside** -- If the page binding edge is on the start-edge, the alignment will be end. If the binding is the end-edge the alignment will be start. If neither, use end alignment.
- **left** -- Interpreted as "text-align-last='start'".
- **right** -- Interpreted as "text-align-last='end'".

### text-align-before-break

| Field | Value |
|---|---|
| **Values** | `relative \| start \| center \| end \| justify \| inside \| outside \| left \| right \| inherit` |
| **Initial** | `relative` |
| **Applies to** | all elements |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#text-align-before-break -->

This property describes how inline content of the last line before a break is aligned. Values have the same meanings as in the definition of "text-align-last".

### text-align-after-break

| Field | Value |
|---|---|
| **Values** | `relative \| start \| center \| end \| justify \| inside \| outside \| left \| right \| inherit` |
| **Initial** | `relative` |
| **Applies to** | all elements |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#text-align-after-break -->

This property describes how inline content of the first line after a break is aligned. Values have the same meanings as in the definition of "text-align-last".

### text-indent

| Field | Value |
|---|---|
| **Values** | `<length> \| <percentage> \| inherit` |
| **Initial** | `0pt` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | refer to width of containing block |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#text-indent -->

This property specifies the indentation of the first line of text in a block. More precisely, it specifies the indentation of the first box that flows into the block's first line box.

Values have the following meanings:

- **\<length\>** -- The indentation is a fixed length.
- **\<percentage\>** -- The indentation is a percentage of the containing block width.

The value of "text-indent" may be negative, but there may be implementation-specific limits. If the value of "text-indent" is negative, the value of "overflow" will affect whether the text is visible.

XSL modifications: The "text-indent" property specifies an adjustment to the start-indent of the first child L of the first block-area generated and returned by the formatting object, provided L is a line-area. A negative value specifies a hanging indent (outdent) on the first line.

### white-space-collapse

| Field | Value |
|---|---|
| **Values** | `false \| true \| inherit` |
| **Initial** | `true` |
| **Applies to** | fo:block, fo:inline |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#white-space-collapse -->

The "white-space-collapse" property specifies the treatment of consecutive white space during area tree construction.

Values have the following meanings:

- **false** -- Specifies no special action.
- **true** -- Specifies, for any character flow object such that: its character is classified as white space in XML, and it is not a U+000A (linefeed) character, and the immediately preceding flow object is a character flow object with a character classified as white space in XML or the immediately following flow object is a linefeed, that flow object shall not generate an area.

The overall effect of handling the linefeed-treatment property during refinement and the white-space-collapse and white-space-treatment properties during area tree generation is as follows: after refinement, where some white space characters may have been discarded or turned into space characters, all remaining runs of two or more consecutive spaces are replaced by a single space, then any remaining space immediately adjacent to a remaining linefeed is also discarded. An implementation is free to use any algorithm to achieve an equivalent effect.

### white-space-treatment

| Field | Value |
|---|---|
| **Values** | `ignore \| preserve \| ignore-if-before-linefeed \| ignore-if-after-linefeed \| ignore-if-surrounding-linefeed \| inherit` |
| **Initial** | `ignore-if-surrounding-linefeed` |
| **Applies to** | fo:block, fo:inline |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#white-space-treatment -->

The "white-space-treatment" property specifies the treatment during line-building and inline-building of glyph areas, except for linefeeds, that are classified as white space in XML. This includes U+0020 (space) and other white space characters but excludes U+000A (linefeed). Linefeed treatment is determined by the "linefeed-treatment" property.

Values have the following meanings:

- **ignore** -- Any glyph-area whose Unicode character is classified as white space in XML, except for U+000A, shall be deleted during line-building and inline-building.
- **preserve** -- Any glyph-area whose Unicode character is classified as white space in XML shall not be deleted during line-building and inline-building.
- **ignore-if-before-linefeed** -- Any glyph-area with a suppress-at-line-break value of 'suppress' shall be deleted during line-building and inline-building if it would be the last glyph-area descendant of a line-area.
- **ignore-if-after-linefeed** -- Any glyph-area with a suppress-at-line-break value of 'suppress' shall be deleted during line-building and inline-building if it would be the first glyph-area descendant of a line-area.
- **ignore-if-surrounding-linefeed** -- Any glyph-area with a suppress-at-line-break value of 'suppress' shall be deleted during line-building and inline-building if it would be the first or last glyph-area descendant of a line-area.

### wrap-option

| Field | Value |
|---|---|
| **Values** | `no-wrap \| wrap \| inherit` |
| **Initial** | `wrap` |
| **Applies to** | fo:block, fo:inline |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#wrap-option -->

Specifies how line-wrapping (line-breaking) of the content of the formatting object is to be handled.

Values have the following meanings:

- **no-wrap** -- No line-wrapping will be performed. In the case when lines are longer than the available width of the content-rectangle, the overflow will be treated in accordance with the "overflow" property specified on the reference-area.
- **wrap** -- Line-breaking will occur if the line overflows the available block width. No special markers or other treatment will occur.

Implementations must support the "no-wrap" value, as defined in this Recommendation, when the value of "linefeed-treatment" is "preserve".

### orphans

| Field | Value |
|---|---|
| **Values** | `<integer> \| inherit` |
| **Initial** | `2` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#orphans -->

In XSL the "orphans" property specifies the minimum number of line-areas in the first area generated by the formatting object.

### widows

| Field | Value |
|---|---|
| **Values** | `<integer> \| inherit` |
| **Initial** | `2` |
| **Applies to** | fo:block |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#widows -->

In XSL the "widows" property specifies the minimum number of line-areas in the last area generated by the formatting object.

### initial-cap-lines

| Field | Value |
|---|---|
| **Values** | `<number> \| <distance>` |
| **Initial** | `0` |
| **Applies to** | fo:inline |
| **Inherited** | Yes |
| **Percentages** | refer to inherited font size |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#initial-cap-lines -->

This property specifies the number of lines spanned by the initial letter.

A value of 1.0 would indicate a regular-sized letter, and a value of 4 would indicate that the first character (or glyph) contained in the fo:inline bearing this property must be sized such that its baseline is aligned with the baseline of the 4th line of the containing block, and the cap-height aligned with the cap-height of the first line. For a vertical script, the corresponding leading and trailing alignment points must be used.

A value of zero must be taken to be the same as the default value of 1.0, and is in effect ignored. A non-integral value represents a proportion, so that a value of 3.5 would indicate that the initial should be half-way between the baselines of the third and fourth lines of text.

### word-spacing-critical-length

| Field | Value |
|---|---|
| **Values** | `<length>` |
| **Initial** | `0pt` |
| **Applies to** | all elements |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#word-spacing-critical-length -->

This property specifies a length (x) for the word spacing to allow before invoking letterspacing. More precisely, it specifies a limitation on the effect of a "letterspacing" value; letterspacing may be used in the line-breaking algorithm within a given line-area when otherwise the word-spacing value would be greater than x.

The value must not be negative.

## Code Samples

No code samples in spec for this property group.

## See Also

- [fo-block.md](fo-block.md) -- primary user of block and line-related properties
- [properties-character.md](properties-character.md) -- character-level properties including letter-spacing and word-spacing
- [properties-hyphenation.md](properties-hyphenation.md) -- common hyphenation properties (language, script, country)
- [properties-keeps-breaks.md](properties-keeps-breaks.md) -- keep and break properties that interact with orphans/widows
