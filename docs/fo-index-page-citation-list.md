# fo:index-page-citation-list

## Summary

The `fo:index-page-citation-list` formatting object is used to group together the sets of cited page items generated by its `fo:index-key-reference` children. Each `fo:index-key-reference` child provides formatting properties for the corresponding cited page items. The resulting cited page items are sorted and collated together. The ultimate effect of the `fo:index-page-citation-list` is to generate a formatted list of page numbers and ranges.

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_index-page-citation-list -->

## Areas

The `fo:index-page-citation-list` formatting object generates and returns one or more normal inline-areas.

## Constraints

The processing of cited page items proceeds in three steps:

**Step A:** Cited page items from all the child `fo:index-key-reference` formatting objects are sorted in area tree order. If `merge-pages-across-index-key-references` has the value "merge", only one cited page item per page is preserved. If "leave-separate", cited page items from different `fo:index-key-reference` objects referring to the same page are preserved separately.

**Step B:** Merging of sequential cited page items into cited page item ranges (only if `merge-sequential-page-numbers` is "merge"). Two cited page items are sequential if and only if: (1) they refer to consecutive page-viewport-areas, (2) they have the same `index-class`, and (3) either they are from the same `fo:index-key-reference` or `merge-ranges-across-index-key-references` is "merge". Three or more sequential items are merged into a range.

**Step C:** Formatting the cited page items and ranges into the final list. For each cited page item, the result includes: optional prefix (from `fo:index-page-number-prefix`), the formatted page number (from the referenced page), and optional suffix (from `fo:index-page-number-suffix`). For ranges, the first and last items are formatted with a range separator between them. Items and ranges are separated by list separators.

Default separators: list separator is comma+space (U+002C U+0020), range separator is en dash (U+2013). Custom separators can be specified using `fo:index-page-citation-list-separator` and `fo:index-page-citation-range-separator` children.

## Content Model

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_index-page-citation-list -->
```xml
(index-page-citation-list-separator?,index-page-citation-range-separator?,index-key-reference+)
```

## Properties

| Property | Inherited | Conformance Level |
|---|---|---|
| `merge-sequential-page-numbers` | no | Extended |
| `merge-ranges-across-index-key-references` | no | Extended |
| `merge-pages-across-index-key-references` | no | Extended |

## Usage Notes

- The `merge-sequential-page-numbers` property controls whether three or more consecutive page numbers are collapsed into a range (e.g., "5-8" instead of "5, 6, 7, 8"). Set to "merge" to enable range merging.
- The `merge-pages-across-index-key-references` property controls whether duplicate page numbers from different `fo:index-key-reference` children are merged. Set to "merge" to deduplicate.
- The `merge-ranges-across-index-key-references` property controls whether ranges can span across different key references. Set to "merge" to allow cross-reference ranges.
- Optional `fo:index-page-citation-list-separator` and `fo:index-page-citation-range-separator` children allow customizing the separators between page numbers and within ranges.
- Multiple `fo:index-key-reference` children can reference different index keys (e.g., normal entries, preferred entries, figure entries) to merge them into a single page number list with different formatting per category.

## Code Samples

No code samples in spec for this formatting object. See the "Formatting Objects for Indexing" introduction section for comprehensive examples of index page citation list processing.

## See Also

- [fo:index-key-reference](fo-index-key-reference.md) — child formatting object that generates cited page items for an index key
- [fo:index-page-citation-list-separator](fo-index-page-citation-list-separator.md) — optional child for custom list separator
- [fo:index-page-citation-range-separator](fo-index-page-citation-range-separator.md) — optional child for custom range separator
- [fo:index-page-number-prefix](fo-index-page-number-prefix.md) — prefix for individual page numbers
- [fo:index-page-number-suffix](fo-index-page-number-suffix.md) — suffix for individual page numbers
