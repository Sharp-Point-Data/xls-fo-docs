# fo:block

## Summary

The fo:block formatting object is commonly used for formatting paragraphs, titles, headlines, figure and table captions, and similar block-level content. It is one of the most fundamental formatting objects in XSL-FO.

## Content Model

```
(#PCDATA|%inline;|%block;)*
```

The fo:block may contain any mixture of text content (#PCDATA), inline-level formatting objects, and block-level formatting objects.

In addition, this formatting object may have a sequence of zero or more fo:markers as its initial children, optionally followed by an fo:initial-property-set.

## Properties

| Property | Type | Initial Value | Inherited | Conformance Level |
|----------|------|---------------|-----------|-------------------|
| Common Accessibility Properties | | | | basic |
| Common Aural Properties | | | | extended |
| Common Border, Padding, and Background Properties | | | | basic |
| Common Font Properties | | | | basic |
| Common Hyphenation Properties | | | | basic |
| Common Margin Properties - Block | | | | basic |
| Common Relative Position Properties | | | | extended |
| break-after | auto \| column \| page \| even-page \| odd-page | auto | no | basic |
| break-before | auto \| column \| page \| even-page \| odd-page | auto | no | basic |
| clear | start \| end \| both \| none | none | no | extended |
| color | color | depends on user agent | yes | basic |
| text-depth | length | use-font-metrics | no | extended |
| text-altitude | length | use-font-metrics | no | extended |
| hyphenation-keep | auto \| column \| page | auto | yes | extended |
| hyphenation-ladder-count | no-limit \| integer | no-limit | yes | extended |
| id | id | (none) | no | basic |
| index-class | string | (empty string) | no | extended |
| index-key | string | (none) | no | extended |
| intrusion-displace | auto \| none \| line \| indent \| block | auto | yes | extended |
| keep-together | auto \| always \| integer | auto | yes | basic |
| keep-with-next | auto \| always \| integer | no | no | basic |
| keep-with-previous | auto \| always \| integer | no | no | basic |
| last-line-end-indent | length \| percentage | 0pt | yes | basic |
| linefeed-treatment | ignore \| preserve \| treat-as-space \| treat-as-zero-width-space | treat-as-space | yes | basic |
| line-height | normal \| length \| number \| percentage \| space | normal | yes | basic |
| line-height-shift-adjustment | consider-shifts \| disregard-shifts | consider-shifts | yes | extended |
| line-stacking-strategy | line-height \| font-height \| max-height | max-height | yes | extended |
| orphans | integer | 2 | yes | basic |
| white-space-treatment | ignore \| preserve \| ignore-if-before-linefeed \| ignore-if-after-linefeed \| ignore-if-surrounding-linefeed | ignore-if-surrounding-linefeed | yes | basic |
| span | none \| all | none | no | basic |
| text-align | start \| center \| end \| justify \| inside \| outside \| left \| right | start | yes | basic |
| text-align-last | relative \| start \| center \| end \| justify \| inside \| outside \| left \| right | relative | yes | basic |
| text-indent | length \| percentage | 0pt | yes | basic |
| visibility | visible \| hidden \| collapse | visible | no | extended |
| border-collapse | collapse \| collapse-with-precedence \| separate | collapse | yes | basic |
| white-space-collapse | false \| true | true | yes | basic |
| widows | integer | 2 | yes | basic |
| wrap-option | no-wrap \| wrap | wrap | yes | basic |

## Areas

The fo:block formatting object generates one or more normal block-areas. The fo:block returns these areas, any page-level-out-of-line areas, and any reference-level-out-of-line areas returned by the children of the fo:block. The fo:block also generates zero or more line-areas as children of the normal block-areas it returns, in accordance with the line-building rules.

## Trait Derivation

The .minimum, .optimum, and .maximum components of the half-leading trait are set to 1/2 the difference of the computed value of the line-height property and the computed value of the sum of the text-altitude and text-depth properties. The .precedence and .conditionality components are copied from the line-height property.

## Constraints

No area may have more than one normal child area returned by the same fo:block formatting object.

The children of each normal area generated by an fo:block must satisfy the constraints specified by the line-building rules.

In addition the constraints imposed by the traits derived from the properties applicable to this formatting object must be satisfied. The geometric constraints are rigorously defined in the area model specification.

## Usage Notes

- fo:block is the primary formatting object for all block-level content: paragraphs, headings, captions, list items, etc.
- Use break-before and break-after to control page and column breaks.
- Use keep-together, keep-with-next, and keep-with-previous to control how blocks are kept together across page/column boundaries.
- The text-indent property controls first-line indentation.
- Use text-align and text-align-last to control horizontal text alignment.
- The orphans and widows properties control minimum line counts when a block is split across pages.
- Use span="all" to make a block span all columns in a multi-column layout.
- fo:initial-property-set can be used as a child to apply special formatting to the first line of the block.

## Code Samples

The following three-part example from the spec demonstrates a complete transformation pipeline: source XML input, an XSLT stylesheet that uses fo:block with various properties, and the resulting XSL-FO output.

### Source XML input

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_region-name-specifier -->
```xml
<doc>
  <chapter>
    <title>Chapter title</title>
    <section>
      <title>First section title</title>
      <paragraph>Section one's first paragraph.</paragraph>
      <paragraph>Section one's second paragraph.</paragraph>
    </section>
    <section>
      <title>Second section title</title>
      <paragraph>Section two's only paragraph.</paragraph>
    </section>
  </chapter>
</doc>
```

### XSLT stylesheet transforming the source to fo:block elements

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_region-name-specifier -->
```xml
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fo="http://www.w3.org/1999/XSL/Format">

<xsl:template match="chapter">
  <fo:block break-before="page">
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

<xsl:template match="chapter/title">
  <fo:block text-align="center" space-after="8pt"
            space-before="16pt" space-after.precedence="3">
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

<xsl:template match="section">
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="section/title">
  <fo:block text-align="center" space-after="6pt"
            space-before="12pt" space-before.precedence="0"
            space-after.precedence="3">
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

<xsl:template match="paragraph[1]" priority="1">
  <fo:block text-indent="0pc" space-after="7pt"
            space-before.minimum="6pt" space-before.optimum="8pt"
            space-before.maximum="10pt">
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

<xsl:template match="paragraph">
  <fo:block text-indent="2pc" space-after="7pt"
            space-before.minimum="6pt" space-before.optimum="8pt"
            space-before.maximum="10pt">
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

</xsl:stylesheet>
```

### Resulting XSL-FO output showing fo:block with break-before, text-align, and space properties

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_region-name-specifier -->
```xml
<fo:block break-before="page">

  <fo:block text-align="center" space-after="8pt"
    space-before="16pt"
    space-after.precedence="3">Chapter title
  </fo:block>

  <fo:block text-align="center" space-after="6pt"
    space-before="12pt" space-before.precedence="0"
    space-after.precedence="3">First section title
  </fo:block>

  <fo:block text-indent="0pc" space-after="7pt"
    space-before.minimum="6pt" space-before.optimum="8pt"
    space-before.maximum="10pt">Section one's first paragraph.
  </fo:block>

  <fo:block text-indent="2pc" space-after="7pt"
    space-before.minimum="6pt" space-before.optimum="8pt"
    space-before.maximum="10pt">Section one's second paragraph.
  </fo:block>

  <fo:block text-align="center" space-after="6pt"
    space-before="12pt" space-before.precedence="0"
    space-after.precedence="3">Second section title
  </fo:block>

  <fo:block text-indent="0pc" space-after="7pt"
    space-before.minimum="6pt" space-before.optimum="8pt"
    space-before.maximum="10pt">Section two's only paragraph.
  </fo:block>

</fo:block>
```

## See Also

- fo:block-container — generates a block-level reference-area for different writing-mode or reference-orientation
- fo:initial-property-set — applies properties to the first line of a block
- fo:marker — defines content for retrieval by fo:retrieve-marker
- fo:inline — inline-level formatting object used within blocks
- fo:flow — parent flow object that contains blocks
- Common Border, Padding, and Background Properties
- Common Font Properties
- Common Margin Properties - Block
