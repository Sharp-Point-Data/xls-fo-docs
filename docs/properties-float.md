# Float-related Properties

## Overview

<!-- Source: https://www.w3.org/TR/xslfo20/#float -->

The float-related properties control the positioning and behavior of floating content within XSL-FO layouts. These properties determine whether content floats to a side of its containing area, which sides of an element's boxes may not be adjacent to earlier floats, and how non-floating content is displaced when floats intrude into their space.

## Properties

### clear

| Field | Value |
|---|---|
| **Values** | `start \| end \| left \| right \| inside \| outside \| both \| none \| inherit` |
| **Initial** | `none` |
| **Applies to** | block-level formatting objects and fo:float |
| **Inherited** | No |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#clear -->

This property indicates which sides of an element's box(es) may not be adjacent to an earlier floating box. (It may be that the element itself has floating descendants; the "clear" property has no effect on those.)

The following definitions apply:

- A **start-float** is an area with area-class "xsl-side-float" generated by an fo:float with property "float" specified as "left" or "start".
- An **end-float** is an area with area-class "xsl-side-float" generated by an fo:float with property "float" specified as "right" or "end".
- An **inside-float** is an area with area-class "xsl-side-float" generated by an fo:float with property "float" specified as "inside".
- An **outside-float** is an area with area-class "xsl-side-float" generated by an fo:float with property "float" specified as "outside".
- A **side-float** is either a start-float or an end-float.

An area is defined to "clear" a side-float if the before-edge of the area's border-rectangle is positioned to be after the after-edge of the float, or if the area is not a descendant of the side-float's parent reference-area.

Values have the following meanings:

- **start** -- Specifies that each area generated by the formatting object must clear every start-float whose parent reference-area is the nearest ancestor reference-area of the generated area, provided the start-float was generated by an fo:float that is before this formatting object, using pre-order traversal order of the formatting tree. Additionally specifies that each area generated by the formatting object must be placed so that the reference-area chain containing the generated area's nearest ancestor reference-area does not contain a later reference-area that is the parent of a start-float generated by an fo:float that is before this formatting object.
- **end** -- Specifies that each area generated by the formatting object must clear every end-float whose parent reference-area is the nearest ancestor reference-area of the generated area, provided the end-float was generated by an fo:float that is before this formatting object, using pre-order traversal order of the formatting tree.
- **left** -- Interpreted as "clear='start'".
- **right** -- Interpreted as "clear='end'".
- **inside** -- Specifies that each area generated by the formatting object must clear every inside-float whose parent reference-area is the nearest ancestor reference-area of the generated area, provided the inside-float was generated by an fo:float that is before this formatting object.
- **outside** -- Specifies that each area generated by the formatting object must clear every outside-float whose parent reference-area is the nearest ancestor reference-area of the generated area, provided the outside-float was generated by an fo:float that is before this formatting object.
- **both** -- Specifies that each area generated by the formatting object must clear every side-float whose parent reference-area is the nearest ancestor reference-area of the generated area, provided the side-float was generated by an fo:float that is before this formatting object.
- **none** -- This property does not impose any constraints.

When a block-level formatting object is constrained by the "clear" property, its space-before property component values may be altered as necessary for each area that it generates, in order to meet the constraint. The alterations are constrained to produce the minimum additional space required to meet the constraint of the "clear" property.

The clear property when applied to an fo:float that generates side-floats does not apply to the fo:float's anchor-area.

### float

| Field | Value |
|---|---|
| **Values** | `before \| start \| end \| left \| right \| inside \| outside \| none \| inherit` |
| **Initial** | `none` |
| **Applies to** | fo:float |
| **Inherited** | No |
| **Percentages** | refer to the inline-progression-dimension of content-rectangle of parent area |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#float -->

This property specifies whether a box should float to the left, right, or not at all. In XSL this property applies only to fo:float.

Values have the following meanings:

- **before** -- Specifies that the block-areas generated by the fo:float shall be with area-class "xsl-before-float", and shall be descendants of a before-float-reference-area generated by a conditional sub-region of a region-body.
- **start** -- Specifies that the block-areas generated by the fo:float shall be with area-class "xsl-side-float" and shall be floated toward the start-edge of the reference area.
- **end** -- Specifies that the block-areas returned by the fo:float shall be with area-class "xsl-side-float" and shall be floated toward the end-edge of the reference area.
- **left** -- Interpreted as "float='start'".
- **right** -- Interpreted as "float='end'".
- **inside** -- Specifies that the block-areas returned by the fo:float shall be with area-class "xsl-side-float" and shall be floated toward an edge determined by the page binding edge. If the page binding edge is on the start-edge, it shall be floated toward the start-edge of the reference area. If the binding is the end-edge, it shall be floated toward the end-edge of the reference area. If neither, it shall be floated toward the start-edge of the reference area.
- **outside** -- Specifies that the block-areas returned by the fo:float shall be with area-class "xsl-side-float" and shall be floated toward an edge determined by the page binding edge. If the page binding edge is on the start-edge, it shall be floated toward the end-edge of the reference area. If the binding is the end-edge, it shall be floated toward the start-edge of the reference area. If neither, it shall be floated toward the end-edge of the reference area.
- **none** -- Specifies that the block-areas generated by the fo:float shall be normal.

This property determines the area-class trait of the block-areas returned by the fo:float, which controls the placement and parent of these block-areas.

The CSS2 spec defines the following precise rules that govern the behavior of floats:

1. The left outer edge of a left-floating box may not be to the left of the left edge of its containing block. An analogous rule holds for right-floating elements.
2. If the current box is left-floating, and there are any left floating boxes generated by elements earlier in the source document, then for each such earlier box, either the left outer edge of the current box must be to the right of the right outer edge of the earlier box, or its top must be lower than the bottom of the earlier box.
3. The right outer edge of a left-floating box may not be to the right of the left outer edge of any right-floating box that is to the right of it.
4. A floating box's outer top may not be higher than the top of its containing block.
5. The outer top of a floating box may not be higher than the outer top of any block or floated box generated by an element earlier in the source document.
6. The outer top of an element's floating box may not be higher than the top of any line-box containing a box generated by an element earlier in the source document.
7. A left-floating box that has another left-floating box to its left may not have its right outer edge to the right of its containing block's right edge.
8. A floating box must be placed as high as possible.
9. A left-floating box must be put as far to the left as possible, a right-floating box as far to the right as possible. A higher position is preferred over one that is further to the left/right.

### intrusion-displace

| Field | Value |
|---|---|
| **Values** | `auto \| none \| line \| indent \| block \| inherit` |
| **Initial** | `auto` |
| **Applies to** | all formatting objects |
| **Inherited** | Yes |
| **Percentages** | N/A |
| **Media** | visual |

<!-- Source: https://www.w3.org/TR/xslfo20/#intrusion-displace -->

This property determines the displacement strategy in the presence of intrusions (i.e., side-floats that overlap with other content areas).

Values have the following meanings:

- **auto** -- For a reference-area, this value is treated as if "block" had been specified. For any other area, this value is treated as if "line" had been specified.
- **none** -- Neither line areas nor block areas are displaced (nor have any adjustment to their inline progression dimension) due to the intrusion of the float. The float overlays the area without affecting any of the content of the area, unless the "clear" property has a specified value other than "none".
- **line** -- The start and end edges of line areas are displaced just enough so that any intrusions no longer intersect the content rectangle of the line area. For the purposes of this test, the allocation rectangle of the intrusion is used in the intersection. Also, such intersections are done with respect to the line area prior to its adjustment of any "text-indent". This will cause a reduction in the inline progression dimension of the line area. This is the behavior of floats described in CSS2.
- **indent** -- The start edge (and end edge) of each line within the block area on which the property occurs is displaced (a) by at least the same amount it would be displaced by the "line" value of this property and (b) in addition, by an amount that preserves the relative offset of that start edge (or end edge) with respect to the start edge (or end edge) of any other line displaced by any intrusion that causes the current line to be displaced. If there is more than one intrusion that could cause a displacement of the line, the largest such displacement is used.
- **block** -- The start edge (and end edge) of the block is displaced by the least amount necessary to ensure that (a) the start edge (end edge) of the block does not intersect any of the start intrusions (end intrusions) that overlap that block and (b) the amount by which it is displaced is at least as much as the displacement of the parent area, provided the parent is a block-area which is not a reference-area. An intrusion is said to overlap a block if there is a line parallel to the inline progression direction that intersects the allocation rectangles of both the block and the intrusion.

Displacing the start edge (and/or end edge) of a block necessarily displaces the start edge (and/or end edge) of all lines and blocks contained within that block.

## Code Samples

No code samples in spec for this property group.

## See Also

- [fo-float](fo-float.md) -- The formatting object that uses the `float` and `clear` properties
- [fo-block](fo-block.md) -- Block-level formatting object affected by `intrusion-displace`
