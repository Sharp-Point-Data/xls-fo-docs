# fo:footnote

## Summary

The `fo:footnote` is typically used to produce footnote-citations within the region-body of a page and the corresponding footnote in a separate area nearer the after-edge of the page.

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_footnote -->

## Areas

The `fo:footnote` formatting object does not generate any areas. The `fo:footnote` formatting object returns the areas generated and returned by its child `fo:inline` formatting object.

Additionally the `fo:footnote` formatting object returns the block-areas with area class "xsl-footnote" generated by its `fo:footnote-body` child. An area with area-class "xsl-footnote" is placed as a child of a footnote-reference-area.

## Constraints

- The term "anchor-area" is defined to mean the last area that is generated and returned by the `fo:inline` child of the `fo:footnote`.
- A block-area returned by the `fo:footnote` is only permitted as a descendant from a footnote-reference-area that is (a) descendant from a "region-reference-area" generated using the region-master for the region to which the flow that has the `fo:footnote` as a descendant is assigned, and (b) is descendant from the same page that contains the anchor-area, or from a page following the page that contains the anchor-area.
- The second block-area and any additional block-areas returned by an `fo:footnote` must be placed on the immediately subsequent pages to the page containing the first block-area returned by the `fo:footnote`, before any other content is placed. If a subsequent page does not contain a region-body, the user agent must use the region-master of the last page that did contain a region-body to hold the additional block-areas.
- It is an error if the `fo:footnote` occurs as a descendant of a flow that is not assigned to one or more region-body regions, or of an `fo:block-container` that generates absolutely positioned areas. In either case, the block-areas generated by the `fo:footnote-body` child of the `fo:footnote` shall be returned to the parent of the `fo:footnote` and placed in the area tree as though they were normal block-level areas.

## Content Model

<!-- Source: https://www.w3.org/TR/xslfo20/#fo_footnote -->
```xml
(inline,footnote-body)
```

An `fo:footnote` is not permitted to have an `fo:float`, `fo:footnote`, or `fo:marker` as a descendant. Additionally, an `fo:footnote` is not permitted to have as a descendant an `fo:block-container` that generates an absolutely positioned area.

## Properties

| Property | Inherited | Conformance Level |
|---|---|---|
| Common Accessibility Properties | N/A | Basic |
| `id` | N/A | Basic |
| `index-class` | N/A | Extended |
| `index-key` | N/A | Extended |

## Usage Notes

- The `fo:footnote` must contain exactly two children: first an `fo:inline` (the footnote citation/marker that appears inline in the text), then an `fo:footnote-body` (the footnote content that appears at the bottom of the page).
- The `fo:inline` child typically contains the footnote reference number or symbol.
- Footnotes cannot be nested: an `fo:footnote` may not contain another `fo:footnote`, `fo:float`, or `fo:marker`.
- If the footnote content does not fit on the page containing the anchor, it will overflow onto subsequent pages.
- The footnote-reference-area where footnote body content is placed is part of the region-body area model, positioned near the after-edge of the page.

## Code Samples

The following three-part example from the spec demonstrates footnote formatting: the source XML, the XSLT stylesheet that produces `fo:footnote`, and the resulting XSL-FO output.

**Source XML with an inline footnote reference:**

<!-- Source: xslspec.xml line 16771 -->
```xml
<doc>
  <p>Some Pod Duang were restruck<fn>Berglund, A., Thai Money, from
Earliest Times to King Rama V, p. 203.</fn> during the reign of King Rama V.</p>
</doc>
```

**XSLT stylesheet using `fo:footnote` with an `fo:inline` citation (superscript number) and `fo:footnote-body` containing the footnote text in a list layout:**

<!-- Source: xslspec.xml line 16784 -->
```xml
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:fo="http://www.w3.org/1999/XSL/Format"
                version='1.0'>

<xsl:template match="p">
  <fo:block>
    <xsl:apply-templates/>
  </fo:block>
</xsl:template>

<xsl:template match="fn">
  <fo:footnote>
    <fo:inline font-size="0.83em" baseline-shift="super">
      <xsl:number level="any" count="fn" format="1)"/>
    </fo:inline>
    <fo:footnote-body>
      <fo:list-block provisional-distance-between-starts="20pt"
          provisional-label-separation="5pt">
        <fo:list-item>
          <fo:list-item-label end-indent="label-end()">
            <fo:block  font-size="0.83em"
                       line-height="0.9em">
              <xsl:number level="any" count="fn" format="1)"/>
            </fo:block>
          </fo:list-item-label>
          <fo:list-item-body start-indent="body-start()">
            <fo:block  font-size="0.83em"
                       line-height="0.9em">
              <xsl:apply-templates/>
            </fo:block>
          </fo:list-item-body>
        </fo:list-item>
      </fo:list-block>
    </fo:footnote-body>
  </fo:footnote>
</xsl:template>

</xsl:stylesheet>
```

**Resulting XSL-FO output with `fo:footnote`, inline superscript citation, and `fo:footnote-body` containing the footnote text:**

<!-- Source: xslspec.xml line 16827 -->
```xml
<fo:block>Some Pod Duang were restruck
  <fo:footnote>
    <fo:inline font-size="0.83em" baseline-shift="super">1)
    </fo:inline>
    <fo:footnote-body>
    <fo:list-block provisional-distance-between-starts="20pt"
      provisional-label-separation="5pt">
    <fo:list-item>
    <fo:list-item-label end-indent="label-end()">
    <fo:block font-size="0.83em" line-height="0.9em">1)
    </fo:block>
    </fo:list-item-label>
    <fo:list-item-body start-indent="body-start()">
    <fo:block font-size="0.83em" line-height="0.9em">Berglund, A.,
Thai Money, from Earliest Times to King Rama V, p. 203.
    </fo:block>
    </fo:list-item-body>
    </fo:list-item>
    </fo:list-block>
    </fo:footnote-body>
  </fo:footnote> during the reign of King Rama V.
</fo:block>
```

## See Also

- `fo:footnote-body` -- child formatting object containing the footnote content
- `fo:inline` -- first child providing the inline footnote citation
- `fo:float` -- another out-of-line formatting object
